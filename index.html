<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>CardChecker</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="card" id="app">

        <!-- Здесь будет выводиться ЛОГОТИП БАНКА -->
        <div class="bank">
            <img v-bind:src="whatBank">
        </div>

        <!-- Поле для ввода НОМЕРА КАРТЫ -->
        <div class="number-container">
            <input type="text" placeholder="Номер карты" v-model="cardNumber" v-bind:class="{'input-err': !statusCardNumber }">
            <div class="status" style="background-position: center; background-size: cover; width: 48px; height: 48px; background-repeat: no-repeat;" v-bind:class="{'status-ok': statusCardNumber, 'status-err': !statusCardNumber}"></div>
        </div>

        <!-- Поле для ввода ИМЕНИ ДЕРЖАТЕЛЯ -->
        <div class="name-container">
            <input type="text" placeholder="Имя держателя" v-model="name" v-bind:class="{'input-err': !statusName}">
            <div class="status" style="background-position: center; background-size: cover; width: 48px; height: 48px; background-repeat: no-repeat;" v-bind:class="{'status-ok': statusName, 'status-err': !statusName}"></div>
        </div>

        <!-- Логотип ПЛАТЕЖНОЙ СИСТЕМЫ -->
        <div class="pay-system">
            <img v-bind:src="paySys">
        </div>

    </div>
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script>
        new Vue({
            el: '#app',
            data: {
                cardNumber: "",
                name: "",
                alphabet: "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ "
            },
            methods: {
            
            },
            computed: {
                paySys(){
                    let firstNum = this.cardNumber[0];
                    switch(firstNum){
                        case '2':
                            return "img/systems/mir.png";
                        case '3':
                            return "img/systems/american-exp.png";
                        case '4':
                            return "img/systems/visa.png";
                        case '5':
                            return "img/systems/mastercard.png";
                        case '6':
                            return "img/systems/maestro.png";
                    }
                },
                statusCardNumber(){
                    let num = this.cardNumber;
                    let sum = 0;
                    if (this.cardNumber.length == 16){
                        for (let i=num.length-1, j=1; i>=0; i--, j++){
                            if (j%2==0){
                                let mul = parseInt(num[i])*2;
                                if (mul<10){
                                    sum+= mul;
                                }else{
                                    sum += mul%10 + Math.floor(mul/10);
                                }
                            }else{
                                sum += parseInt(num[i]);
                            }
                        }
                        return sum%10==0;
                    }else{
                        return false;
                    }  
                },
                statusName(){
                    let ok = true;
                    for (let one of this.name){
                        let fl = false;
                        for (let note of this.alphabet){
                            if (one == note) fl = true;
                             console.log(one , ' == ', note);
                        }
                        if (fl == false){
                            ok = false;
                            break;
                        }
                    }
                    if (this.name.length > 0) return ok;
                    else return false;
                },
                whatBank(){
                    let binNumbers = this.cardNumber.substring(0, 6);
                    switch(binNumbers){
                        case '521178':
                            return "img/banks/alpha.png";
                        case '548673':
                            return "img/banks/alpha.png";
                        case '548601':
                            return "img/banks/alpha.png";
                        case '415428':
                            return "img/banks/alpha.png";
                        case '676371':
                            return "img/banks/alpha.png";
                        case '477964':
                            return "img/banks/alpha.png";
                        case '479004':
                            return "img/banks/alpha.png";
                        
                        case '427229':
                            return "img/banks/vtb.png"; 
                        case '527883':
                            return "img/banks/vtb.png"; 
                        case '447520':
                            return "img/banks/vtb.png"; 
                        
                        case '548999':
                            return "img/banks/gazprombank.png";
                        case '526483':
                            return "img/banks/gazprombank.png";
                            
                        case '533736':
                            return "img/banks/mts-bank.png";
                        case '540616':
                            return "img/banks/mts-bank.png";
                            
                        case '434146':
                            return "img/banks/otkrytie.png";
                        case '405870':
                            return "img/banks/otkrytie.png";
                        case '544573':
                            return "img/banks/otkrytie.png";
                        case '532301':
                            return "img/banks/otkrytie.png";
                        
                        case '440503':
                            return "img/banks/rosbank.png";
                        case '554761':
                            return "img/banks/rosbank.png";
                        
                        case '513691':
                            return "img/banks/russian_standart.png";
                        case '510047':
                            return "img/banks/russian_standart.png";
                            
                        case '462730':
                            return "img/banks/raiffaizen.png";
                        case '462730':
                            return "img/banks/raiffaizen.png";
                        
                        case '427683':
                            return "img/banks/sberbank.png";
                        case '427901':
                            return "img/banks/sberbank.png";
                        case '427644':
                            return "img/banks/sberbank.png";
                        case '427601':
                            return "img/banks/sberbank.png";
                        case '427901':
                            return "img/banks/sberbank.png";
                        case '427631':
                            return "img/banks/sberbank.png";
                        case '427638':
                            return "img/banks/sberbank.png";
                        case '546938':
                            return "img/banks/sberbank.png";
                            
                        case '521324':
                            return "img/banks/tinkoff.png";
                        case '437773':
                            return "img/banks/tinkoff.png";
                    }
                }
            }
        })
    </script> 
</body>
</html>